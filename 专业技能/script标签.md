# script元素

* 使用`<script>`元素
* 行内脚本与外部脚本的比较
* 文档模式对JavaScript有什么影响
* 确保JavaScript不可用时的用户体验

## `<script>`元素

​	将JavaScript插入HTML的主要方法是使用`<script>`元素。这个元素由网景公司创造出来，并最早在Netscape Navigator 2中实现的。后来，这个元素被正式加入到HTML规范。`<script>`元素有下列8个属性。

* async：可选。表示应该立即开始下载脚本，但不能阻止页面其他的动作，比如下载资源或等待其他脚本加载。只对外部脚本文件有效。
* charset：可选。使用src属性指定的代码字符集。这个属性很少使用，因为大多数浏览器不在乎它的值。
* crossorigin：可选。配置相关请求的CORS（跨源资源共享）设置。默认不使用CORS。
* defer：可选。表示在文档解析和显示完成后再执行脚本是没有问题的。只对外部脚本文件有效。
* integrity：可选。允许比对接收到的资源和指定的加密签名以验证子资源完整性。
* language：废弃。最初用于表示代码块的脚本语言。
* src：可选。表示包含要执行的代码的外部文件。
* type：可选。代替language，表示代码中脚本语言的内容类型（MIME类型）。

##  标签位置

不管包含的是什么代码，浏览器都会按照`<script>`标签在页面中出现的顺序依次解释它们，前提是它们没有使用defer和async属性。

过去，所有的`<script>`元素都被放在页面的`<head>`标签内，这种做法的主要目的是把外部的CSS和JS文件都集中放在一起。不过，把所有JS文件都放在`<head>`里，也就意味着必须把所有JS代码都下载、解析和解释完成后，才能开始渲染页面（页面在浏览器解析到`<body>`标签的其实标签时开始渲染）。对于有很多JS的页面这回导致页面渲染很迟钝,在此期间浏览器窗口完全空白.为了解决这个问题,现代web应用程序通常将JS应用放在`<body>`元素的最后。

## 推迟执行脚本

HTML 4.01为`<script>`元素定义了一个名为defer的属性。这个属性表示脚本在执行到时候不会改变页面的结构。因此，这个脚本完全可以在整个页面解析完之后再运行。在`<script>`元素上设置defer属性，会告诉浏览器应该立即开始下载。

包含defer的`<script>`元素会在`<html/>`元素结束之后执行，HTML5要求defer顺序执行。

## 异步执行脚本

HTML5为`<script>`元素定义了async属性。从改变脚本处理方式上来看，async属性与defer类似。async属性告诉浏览器不必等待脚本下载完成和执行完成后再加载界面，同样也不必等到该异步脚本下载和执行完成后再加载其他脚本。正因如此，异步脚本不应再加载期间修改DOM。异步脚本会在load事件前执行，但可能会在DOMContentLoaded之前或之后。

## 动态加载脚本

除了`<script>`标签，还有其它方式可以加载脚本。因为JS可以使用DOM API，所以通过向DOM中动态添加script元素同样可以加载指定的脚本。只要创建一个script元素并将其添加到DOM即可。

以这种方式获取资源对浏览器预加载器是不可见的。这会严重影响它们在资源获取队列中的优先级。根据应用程序的工作方式以及怎么使用这种方式可能会严重影响性能。要想让预加载器知道这些动态请求文件的存在，可以在文档头部显示声明它们。

`<link rel="preload" href="gibberish.js">`

## `<noscript>`元素

针对不支持JS的浏览器，需要一个页面优雅降级的处理方案。最终，`<noscript>`元素出现，被用于给不支持JS的浏览器提供替代内容。

在下列情况会显示包含在`<noscript>`元素的内容：

* 浏览器不支持JS
* 浏览器对JS的支持被关闭





























