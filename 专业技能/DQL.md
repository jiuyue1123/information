# DQL

数据查询语言DQL（Data Query Language） 即`查询操作`，以select关键字。各种简单查询，连接查询等 都属于DQL。

```sql
SELECT
	字段列表
FROM
	表名列表
WHERE
	条件列表
GROUP BY
	分组字段
HAXING
	分组后的条件
ORDER BY
	排序字段
LIMIT
	分页限定
```

## 基础查询

* 查询多个字段

  `SELECT 字段列表 FROM 表名;`

  `SELECT * FROM 表名;`

* 去除重复记录

  ``SELECT DISTINCT 字段列表 FROM 表名;``

* 起别名

  `AS: AS也可以省略`

## 条件查询

`SELECT 字段列表 FROM 表名 条件列表;`

### 条件

| 运算符  | 描述                                                       |
| :------ | :--------------------------------------------------------- |
| =       | 等于                                                       |
| <>      | 不等于。**注释：**在 SQL 的一些版本中，该操作符可被写成 != |
| >       | 大于                                                       |
| <       | 小于                                                       |
| >=      | 大于等于                                                   |
| <=      | 小于等于                                                   |
| BETWEEN | 在某个范围内                                               |
| LIKE    | 搜索某种模式                                               |
| IN      | 指定针对某个列的多个可能值                                 |

## 排序查询

`SELECT 字段列表 FROM 表名 ORDER BY 排序字段名1 [排列方式1], 排序字段名2 [排列方式2], ...;`

排序方式：

* ASC： 生序排列(默认)
* DESC：降序排列

## 聚合函数

将一列数据作为一个整体，进行纵向计算。

### SQL Aggregate 函数

SQL Aggregate 函数计算从列中取得的值，返回一个单一的值。

有用的 Aggregate 函数：

- AVG() - 返回平均值
- COUNT() - 返回行数
- FIRST() - 返回第一个记录的值
- LAST() - 返回最后一个记录的值
- MAX() - 返回最大值
- MIN() - 返回最小值
- SUM() - 返回总和

### SQL Scalar 函数

SQL Scalar 函数基于输入值，返回一个单一的值。

有用的 Scalar 函数：

- UCASE() - 将某个字段转换为大写
- LCASE() - 将某个字段转换为小写
- MID() - 从某个文本字段提取字符，MySql 中使用
- SubString(字段，1，end) - 从某个文本字段提取字符
- LEN() - 返回某个文本字段的长度
- ROUND() - 对某个数值字段进行指定小数位数的四舍五入
- NOW() - 返回当前的系统日期和时间
- FORMAT() - 格式化某个字段的显示方式

#### 语法

`SELECT 聚合函数名(列名) FROM 表;`

null不参与所有聚合函数运算

## 分组查询

`SELECT 字段列表 FROM 表名 [WHERE 分组前条件限定] GROUP BY 分组字段名 [HAVING 分组后条件过滤];`

注意：分组之后，查询的字段为聚合函数和分组字段，查询其他字段无任何意义。

`WHERE`和`HAVING`的区别：

* 执行时机不一样：`WHERE`是分组之前进行限定，不满足`WHERE`条件，则不参与分组，而`HAVING`是分组之后对结果进行过滤。
* 可判断的条件不一样：`WHERE`不能对聚合函数进行判断，`HAVING`可以。

## 分页查询

`SELECT 字段列表 FROM 表名 LIMIT 起始索引, 查询条目数; 

* 起始索引： 从0开始

计算公式：起始索引=(当前页码 - 1) * 每页显示的条数

`tips`：

* 分页查询`LIMIT`是`MYSQL`数据库的方言